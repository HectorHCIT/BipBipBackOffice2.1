<div class="p-4">
  <p-card>
    <ng-template pTemplate="header">
      <div class="p-4 pb-0">
        <h3 class="text-xl font-semibold m-0">Otorgar Bips al Usuario</h3>
      </div>
    </ng-template>

    <form [formGroup]="grantBipsForm()" (ngSubmit)="onSubmit()" class="space-y-4">
      <!-- Action Type -->
      <div>
        <label for="action" class="block text-sm font-medium mb-2">Acción</label>
        <p-select
          id="action"
          formControlName="action"
          [options]="actionOptions"
          optionLabel="label"
          optionValue="value"
          placeholder="Seleccione una acción"
          styleClass="w-full"
        />
        @if (grantBipsForm().get('action')?.invalid && grantBipsForm().get('action')?.touched) {
          <small class="text-red-600">La acción es requerida</small>
        }
      </div>

      <!-- Quantity -->
      <div>
        <label for="quantity" class="block text-sm font-medium mb-2">Cantidad de Bips</label>
        <p-inputNumber
          id="quantity"
          formControlName="quantity"
          [min]="1"
          [max]="10000"
          placeholder="Ingrese la cantidad"
          styleClass="w-full"
        />
        @if (grantBipsForm().get('quantity')?.invalid && grantBipsForm().get('quantity')?.touched) {
          <small class="text-red-600">La cantidad debe ser mayor a 0</small>
        }
      </div>

      <!-- Reason -->
      <div>
        <label for="reason" class="block text-sm font-medium mb-2">Razón</label>
        <textarea
          pTextarea
          id="reason"
          formControlName="reason"
          rows="3"
          placeholder="Ingrese la razón para otorgar/quitar Bips"
          class="w-full"
        ></textarea>
        @if (grantBipsForm().get('reason')?.invalid && grantBipsForm().get('reason')?.touched) {
          <small class="text-red-600">La razón es requerida</small>
        }
      </div>

      <!-- Error Message -->
      @if (error()) {
        <p-message severity="error" [text]="error()!" styleClass="w-full" />
      }

      <!-- Success Message -->
      @if (success()) {
        <p-message severity="success" [text]="success()!" styleClass="w-full" />
      }

      <!-- Actions -->
      <div class="flex justify-end gap-2">
        <p-button
          type="button"
          label="Cancelar"
          severity="secondary"
          [outlined]="true"
          (onClick)="resetForm()"
        />
        <p-button
          type="submit"
          label="Confirmar"
          [loading]="isSubmitting()"
          [disabled]="grantBipsForm().invalid"
        />
      </div>
    </form>
  </p-card>
</div>
