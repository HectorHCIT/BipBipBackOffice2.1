<div class="notifications-page p-6">
  <!-- Breadcrumb -->
  <p-breadcrumb [model]="breadcrumbItems" [home]="home" styleClass="mb-4" />

  <!-- Header -->
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-3xl font-bold m-0">Gestión de Notificaciones</h1>
    <div class="flex gap-2">
      <p-button
        icon="pi pi-refresh"
        label="Actualizar"
        [outlined]="true"
        (onClick)="refreshData()"
      />
      <p-button
        icon="pi pi-plus"
        label="Nueva Notificación"
        (onClick)="goToCreateNotification()"
      />
    </div>
  </div>

  <!-- Tabs -->
  <p-tabs [(value)]="activeTab">
    <p-tablist>
      <p-tab value="calendar">
        <i class="pi pi-calendar mr-2"></i>
        Calendario
      </p-tab>
      <p-tab value="history">
        <i class="pi pi-list mr-2"></i>
        Historial
      </p-tab>
    </p-tablist>

    <p-tabpanels>
      <!-- Calendar Tab -->
      <p-tabpanel value="calendar">
        @if (events().length === 0 && !isLoading()) {
          <div class="empty-state">
            <p-message
              severity="info"
              styleClass="w-full"
            >
              <ng-template pTemplate>
                <div class="flex flex-col items-center justify-center py-12">
                  <i class="pi pi-calendar text-6xl text-gray-400 mb-4"></i>
                  <h3 class="text-xl font-semibold mb-2">Aún no se han creado notificaciones</h3>
                  <p class="text-gray-600 mb-4">Comienza creando tu primera notificación programada</p>
                  <p-button
                    icon="pi pi-plus"
                    label="Crear Primera Notificación"
                    (onClick)="goToCreateNotification()"
                  />
                </div>
              </ng-template>
            </p-message>
          </div>
        } @else {
          <app-notification-calendar
            [events]="events()"
            [stats]="stats()"
            [isLoading]="isLoading()"
            (eventClick)="onEventClick($event)"
            (dateClick)="onDateClick($event)"
          />
        }
      </p-tabpanel>

      <!-- History Tab -->
      <p-tabpanel value="history">
        <app-notification-history />
      </p-tabpanel>
    </p-tabpanels>
  </p-tabs>
</div>
